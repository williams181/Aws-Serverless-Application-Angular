<app-navbar></app-navbar>

<div class="container mt-5">
    
    <div *ngIf="att; else load"></div>
   <ng-template #load>
   <div class="d-flex justify-content-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  </ng-template>
   
<div class="container-md mt-3">
    <h2><strong style="font-family: Georgia, 'Times New Roman', Times, serif;">Registro de Contas Médicas</strong></h2>
</div>

<div class="container mt-3">
    
    <form class="needs-validation" novalidate [formGroup]="form" >
             
        <input type="hidden" class="form-control" id="id" formControlName="id" >
             
        <div class="row">
            <div class="col">
                <div class="mb-3">
                    <label class="form-label" style="font-size: larger;">Médico</label>
                    <input type="text" class="form-control" maxlength="50" id="medico" formControlName="medico" [ngClass]="{'is-invalid': submited  && hasError('medico')}" >
                    <div class="form-text"></div>
                </div>

            </div>
            
            <div class="col">
                <div class="mb-3">
                    <label class="form-label" style="font-size: larger;">CRM</label>
                    <input type="number" maxlength="8" class="form-control" id="CRM" formControlName="CRM" [ngClass]="{'is-invalid': submited && hasError('CRM')}">
                    <div class="form-text"></div>
                </div>

            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="mb-3">
                    <label class="form-label" style="font-size: larger;">Hospital</label>
                    <input type="text" maxlength="100" class="form-control" id="hospital"  formControlName="hospital" [ngClass]="{'is-invalid': submited && hasError('hospital')}">
                    <div class="form-text"></div>
                </div>

            </div>

            <div class="col">
                <div class="mb-3">
                    <label class="form-label" style="font-size: larger;">CNPJ</label>
                    <input type="text" maxlength="25" placeholder="XX. XXX. XXX/0001-XX" class="form-control" id="cnpj" formControlName="CNPJ" [ngClass]="{'is-invalid': submited && hasError('CNPJ')}">
                    <div class="invalid-feedback" *ngIf="hasError('CNPJ')">
                        CNPJ deve estar completo
                    </div>
                   
                    <div class="form-text"></div>
                </div>

            </div>
        </div>

        <div class="mb-3">
            <label class="form-label" style="font-size: larger;">Paciente</label>
            <input type="text" maxlength="50" class="form-control" id="paciente"  formControlName="paciente" [ngClass]="{'is-invalid': submited && hasError('paciente')}">
            <div class="form-text"></div>
        </div>

        <div class="mb-3">
            <label class="form-label" style="font-size: larger;">Convênio</label>
            <input type="text" maxlength="50" class="form-control" id="convenio"  formControlName="convenio" [ngClass]="{'is-invalid': submited && hasError('convenio')}">
            <div class="form-text"></div>
        </div>

        <div class="mb-3">
            <label class="form-label" style="font-size: larger;">Acomodação</label>
            <input type="text" maxlength="50" class="form-control" id="acomodacao"  formControlName="acomodacao" [ngClass]="{'is-invalid': submited && hasError('acomodacao')}"> 
            <div class="form-text"></div>
        </div>

        <div class="mb-3">
            <label class="form-label" style="font-size: larger;">Procedimento</label>
            <input type="text" maxlength="50" class="form-control" id="procedimento" formControlName="procedimento" [ngClass]="{'is-invalid': submited && hasError('procedimento')}">
            <div class="form-text"></div>
        </div>

        <button *ngIf="show; else loading" id="buttonSave" (click)="Validador()" type="submit" class="btn btn-primary">Enviar Documento</button>
        
        <ng-template #loading>
            <button class="btn btn-primary" type="button" disabled>
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Loading...
            </button>
        </ng-template>

    </form>

</div>